<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë‰´ìŠ¤ ê²€ìƒ‰ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 20px;
            background: #f4f6f9;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 40px;
        }

        .diagram-section {
            margin-bottom: 60px;
        }

        h2 {
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 20px;
            color: #444;
        }

        .mermaid {
            display: flex;
            justify-content: center;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ—ï¸ AI ë‰´ìŠ¤ ê²€ìƒ‰ ì‹œìŠ¤í…œ êµ¬ì¡°ë„</h1>

        <div class="diagram-section">
            <h2>1. ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (System Architecture)</h2>
            <div class="mermaid">
                graph TD
                subgraph "Client Side"
                User((ì‚¬ìš©ì))
                Browser[ì›¹ ë¸Œë¼ìš°ì €]
                end

                subgraph "Frontend (React + Vite :3001)"
                UI[App.jsx]
                Components[ResultSection / Tooltip]
                end

                subgraph "Backend (FastAPI :8000)"
                API[API Server]
                Manager[GraphRAG Manager]
                Retriever[Tools Retriever]

                subgraph "Search Strategies"
                VR[Vector Search]
                VCR[Vector + Cypher]
                T2C[Text -> Cypher]
                end
                end

                subgraph "External & Data"
                LLM[OpenAI GPT-4o]
                Neo4j[(Neo4j Graph DB)]
                end

                User -->|ì ‘ì†| Browser
                Browser -->|ë Œë”ë§| UI
                UI -->|API í˜¸ì¶œ| API
                API -->|ìš”ì²­ ì²˜ë¦¬| Manager
                Manager -->|ì „ëµ ì„ íƒ| Retriever
                Retriever --> VR & VCR & T2C

                VR & VCR & T2C -->|Query| Neo4j
                Manager -->|Context + Prompt| LLM

                style UI fill:#e1f5fe,stroke:#01579b
                style API fill:#e8f5e9,stroke:#2e7d32
                style Neo4j fill:#fff3e0,stroke:#ef6c00
                style LLM fill:#f3e5f5,stroke:#7b1fa2
            </div>
        </div>

        <div class="diagram-section">
            <h2>2. ë°ì´í„° íë¦„ë„ (Data Flow Sequence)</h2>
            <div class="mermaid">
                sequenceDiagram
                actor User
                participant FE as React Frontend
                participant BE as FastAPI Backend
                participant RAG as GraphRAG
                participant DB as Neo4j
                participant AI as OpenAI GPT-4o

                User->>FE: 1. ê²€ìƒ‰ì–´ ì…ë ¥ ("ê²½ì œ ë‰´ìŠ¤")
                FE->>BE: 2. POST /search
                BE->>RAG: 3. search() í˜¸ì¶œ

                rect rgb(240, 248, 255)
                note right of RAG: í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì‹¤í–‰
                par Parallel Retrieval
                RAG->>DB: Vector Search
                RAG->>DB: Graph Traversal
                RAG->>DB: Text2Cypher
                end
                DB-->>RAG: ê²€ìƒ‰ëœ ë…¸ë“œ/ê´€ê³„ ë°ì´í„°
                end

                RAG->>AI: 4. Context + Prompt ì „ì†¡
                AI-->>RAG: 5. ìš”ì•½ ë° ë‹µë³€ ìƒì„± (JSON)
                RAG-->>BE: 6. ìµœì¢… ê²°ê³¼ ë°˜í™˜
                BE-->>FE: 7. JSON Response
                FE-->>User: 8. ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ ê²°ê³¼ í‘œì‹œ
            </div>
        </div>

        <div class="diagram-section">
            <h2>3. Neo4j ê·¸ë˜í”„ ë°ì´í„° ëª¨ë¸ (Schema)</h2>
            <div class="mermaid">
                erDiagram
                Article ||--o{ Content : HAS_CHUNK
                Article ||--|| Category : BELONGS_TO
                Article ||--|| Media : PUBLISHED

                Article {
                string title "ê¸°ì‚¬ ì œëª©"
                string url "ë§í¬"
                datetime published_date "ë°œí–‰ì¼"
                }

                Content {
                string chunk "í…ìŠ¤íŠ¸ ì¡°ê°"
                vector embedding "ì„ë² ë”© ë°±í„°"
                }

                Category {
                string name "ë¶„ì•¼ (ê²½ì œ, ì •ì¹˜ ë“±)"
                }

                Media {
                string name "ì–¸ë¡ ì‚¬ëª…"
                }
            </div>
        </div>
    </div>
</body>

</html>